(function(){var a;CKEDITOR.plugins.add("editingblock",{init:function(b){if(!b.config.editingBlock){return}b.on("themeSpace",function(c){if(c.data.space=="contents"){c.data.html+="<br>"}});b.on("themeLoaded",function(){b.fireOnce("editingBlockReady")});b.on("uiReady",function(){b.setMode(b.config.startupMode)});b.on("afterSetData",function(){if(!a){function c(){a=true;b.getMode().loadData(b.getData());a=false}if(b.mode){c()}else{b.on("mode",function(){if(b.mode){c();b.removeListener("mode",arguments.callee)}})}}});b.on("beforeGetData",function(){if(!a&&b.mode){a=true;b.setData(b.getMode().getData(),null,1);a=false}});b.on("getSnapshot",function(c){if(b.mode){c.data=b.getMode().getSnapshotData()}});b.on("loadSnapshot",function(c){if(b.mode){b.getMode().loadSnapshotData(c.data)}});b.on("mode",function(c){c.removeListener();CKEDITOR.env.webkit&&b.container.on("focus",function(){b.focus()});if(b.config.startupFocus){b.focus()}setTimeout(function(){b.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,b)},0)});b.on("destroy",function(){if(this.mode){this._.modes[this.mode].unload(this.getThemeSpace("contents"))}})}});CKEDITOR.editor.prototype.mode="";CKEDITOR.editor.prototype.addMode=function(c,b){b.name=c;(this._.modes||(this._.modes={}))[c]=b};CKEDITOR.editor.prototype.setMode=function(g){this.fire("beforeSetMode",{newMode:g});var f,c=this.getThemeSpace("contents"),e=this.checkDirty();if(this.mode){if(g==this.mode){return}this._.previousMode=this.mode;this.fire("beforeModeUnload");var d=this.getMode();f=d.getData();d.unload(c);this.mode=""}c.setHtml("");var b=this.getMode(g);if(!b){throw'[CKEDITOR.editor.setMode] Unknown mode "'+g+'".'}if(!e){this.on("mode",function(){this.resetDirty();this.removeListener("mode",arguments.callee)})}b.load(c,(typeof f)!="string"?this.getData():f)};CKEDITOR.editor.prototype.getMode=function(b){return this._.modes&&this._.modes[b||this.mode]};CKEDITOR.editor.prototype.focus=function(){this.forceNextSelectionCheck();var b=this.getMode();if(b){b.focus()}}})();CKEDITOR.config.startupMode="wysiwyg";CKEDITOR.config.editingBlock=true;