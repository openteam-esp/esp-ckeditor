(function(){var d={editorFocus:false,modes:{wysiwyg:1,source:1}};var a={exec:function(e){e.container.focusNext(true,e.tabIndex)}};var b={exec:function(e){e.container.focusPrevious(true,e.tabIndex)}};function c(e){return{editorFocus:false,canUndo:false,modes:{wysiwyg:1},exec:function(m){if(m.focusManager.hasFocus){var f=m.getSelection(),k=f.getCommonAncestor(),o;if((o=(k.getAscendant("td",true)||k.getAscendant("th",true)))){var n=new CKEDITOR.dom.range(m.document),j=CKEDITOR.tools.tryThese(function(){var s=o.getParent(),i=s.$.cells[o.$.cellIndex+(e?-1:1)];i.parentNode.parentNode;return i},function(){var t=o.getParent(),s=t.getAscendant("table"),i=s.$.rows[t.$.rowIndex+(e?-1:1)];return i.cells[e?i.cells.length-1:0]});if(!(j||e)){var q=o.getAscendant("table").$,r=o.getParent().$.cells;var p=new CKEDITOR.dom.element(q.insertRow(-1),m.document);for(var h=0,l=r.length;h<l;h++){var g=p.append(new CKEDITOR.dom.element(r[h],m.document).clone(false,false));!CKEDITOR.env.ie&&g.appendBogus()}n.moveToElementEditStart(p)}else{if(j){j=new CKEDITOR.dom.element(j);n.moveToElementEditStart(j);if(!(n.checkStartOfBlock()&&n.checkEndOfBlock())){n.selectNodeContents(j)}}else{return true}}n.select(true);return true}}return false}}}CKEDITOR.plugins.add("tab",{requires:["keystrokes"],init:function(g){var f=g.config.enableTabKeyTools!==false,h=g.config.tabSpaces||0,e="";while(h--){e+="\xa0"}if(e){g.on("key",function(i){if(i.data.keyCode==9){g.insertHtml(e);i.cancel()}})}if(f){g.on("key",function(i){if(i.data.keyCode==9&&g.execCommand("selectNextCell")||i.data.keyCode==(CKEDITOR.SHIFT+9)&&g.execCommand("selectPreviousCell")){i.cancel()}})}if(CKEDITOR.env.webkit||CKEDITOR.env.gecko){g.on("key",function(i){var j=i.data.keyCode;if(j==9&&!e){i.cancel();g.execCommand("blur")}if(j==(CKEDITOR.SHIFT+9)){g.execCommand("blurBack");i.cancel()}})}g.addCommand("blur",CKEDITOR.tools.extend(a,d));g.addCommand("blurBack",CKEDITOR.tools.extend(b,d));g.addCommand("selectNextCell",c());g.addCommand("selectPreviousCell",c(true))}})})();CKEDITOR.dom.element.prototype.focusNext=function(b,c){var e=this.$,f=(c===undefined?this.getTabIndex():c),i,h,a,g,d,j;if(f<=0){d=this.getNextSourceNode(b,CKEDITOR.NODE_ELEMENT);while(d){if(d.isVisible()&&d.getTabIndex()===0){a=d;break}d=d.getNextSourceNode(false,CKEDITOR.NODE_ELEMENT)}}else{d=this.getDocument().getBody().getFirst();while((d=d.getNextSourceNode(false,CKEDITOR.NODE_ELEMENT))){if(!i){if(!h&&d.equals(this)){h=true;if(b){if(!(d=d.getNextSourceNode(true,CKEDITOR.NODE_ELEMENT))){break}i=1}}else{if(h&&!this.contains(d)){i=1}}}if(!d.isVisible()||(j=d.getTabIndex())<0){continue}if(i&&j==f){a=d;break}if(j>f&&(!a||!g||j<g)){a=d;g=j}else{if(!a&&j===0){a=d;g=j}}}}if(a){a.focus()}};CKEDITOR.dom.element.prototype.focusPrevious=function(b,c){var e=this.$,f=(c===undefined?this.getTabIndex():c),i,h,a,g=0,j;var d=this.getDocument().getBody().getLast();while((d=d.getPreviousSourceNode(false,CKEDITOR.NODE_ELEMENT))){if(!i){if(!h&&d.equals(this)){h=true;if(b){if(!(d=d.getPreviousSourceNode(true,CKEDITOR.NODE_ELEMENT))){break}i=1}}else{if(h&&!this.contains(d)){i=1}}}if(!d.isVisible()||(j=d.getTabIndex())<0){continue}if(f<=0){if(i&&j===0){a=d;break}if(j>g){a=d;g=j}}else{if(i&&j==f){a=d;break}if(j<f&&(!a||j>g)){a=d;g=j}}}if(a){a.focus()}};