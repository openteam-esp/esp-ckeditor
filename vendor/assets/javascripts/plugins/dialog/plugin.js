CKEDITOR.DIALOG_RESIZE_NONE=0;CKEDITOR.DIALOG_RESIZE_WIDTH=1;CKEDITOR.DIALOG_RESIZE_HEIGHT=2;CKEDITOR.DIALOG_RESIZE_BOTH=3;(function(){var h=CKEDITOR.tools.cssLength;function f(G){return !!this._.tabs[G][0].$.offsetHeight}function q(){var H=this._.currentTabId,J=this._.tabIdList.length,G=CKEDITOR.tools.indexOf(this._.tabIdList,H)+J;for(var I=G-1;I>G-J;I--){if(f.call(this,this._.tabIdList[I%J])){return this._.tabIdList[I%J]}}return null}function A(){var H=this._.currentTabId,J=this._.tabIdList.length,G=CKEDITOR.tools.indexOf(this._.tabIdList,H);for(var I=G+1;I<G+J;I++){if(f.call(this,this._.tabIdList[I%J])){return this._.tabIdList[I%J]}}return null}function r(H,J){var G=H.$.getElementsByTagName("input");for(var I=0,L=G.length;I<L;I++){var K=new CKEDITOR.dom.element(G[I]);if(K.getAttribute("type").toLowerCase()=="text"){if(J){K.setAttribute("value",K.getCustomData("fake_value")||"");K.removeCustomData("fake_value")}else{K.setCustomData("fake_value",K.getAttribute("value"));K.setAttribute("value","")}}}}function b(H,I){var G=this.getInputElement();if(G){H?G.removeAttribute("aria-invalid"):G.setAttribute("aria-invalid",true)}if(!H){if(this.select){this.select()}else{this.focus()}}I&&alert(I);this.fire("validated",{valid:H,msg:I})}function x(){var G=this.getInputElement();G&&G.removeAttribute("aria-invalid")}CKEDITOR.dialog=function(J,N){var K=CKEDITOR.dialog._.dialogDefinitions[N],X=CKEDITOR.tools.clone(t),ad=J.config.dialog_buttonsOrder||"OS",Q=J.lang.dir;if((ad=="OS"&&CKEDITOR.env.mac)||(ad=="rtl"&&Q=="ltr")||(ad=="ltr"&&Q=="rtl")){X.buttons.reverse()}K=CKEDITOR.tools.extend(K(J),X);K=CKEDITOR.tools.clone(K);K=new s(this,K);var ae=CKEDITOR.document;var V=J.theme.buildDialog(J);this._={editor:J,element:V.element,name:N,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:false,focusList:[],currentFocusIndex:0,hasFocus:false};this.parts=V.parts;CKEDITOR.tools.setTimeout(function(){J.fire("ariaWidget",this.parts.contents)},0,this);var ab={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"};ab[Q=="rtl"?"right":"left"]=0;this.parts.dialog.setStyles(ab);CKEDITOR.event.call(this);this.definition=K=CKEDITOR.fire("dialogDefinition",{name:N,definition:K},J).definition;var I={};if(!("removeDialogTabs" in J._)&&J.config.removeDialogTabs){var aa=J.config.removeDialogTabs.split(";");for(W=0;W<aa.length;W++){var S=aa[W].split(":");if(S.length==2){var H=S[0];if(!I[H]){I[H]=[]}I[H].push(S[1])}}J._.removeDialogTabs=I}if(J._.removeDialogTabs&&(I=J._.removeDialogTabs[N])){for(W=0;W<I.length;W++){K.removeContents(I[W])}}if(K.onLoad){this.on("load",K.onLoad)}if(K.onShow){this.on("show",K.onShow)}if(K.onHide){this.on("hide",K.onHide)}if(K.onOk){this.on("ok",function(af){J.fire("saveSnapshot");setTimeout(function(){J.fire("saveSnapshot")},0);if(K.onOk.call(this,af)===false){af.data.hide=false}})}if(K.onCancel){this.on("cancel",function(af){if(K.onCancel.call(this,af)===false){af.data.hide=false}})}var ac=this;var T=function(aj){var ai=ac._.contents,ah=false;for(var ag in ai){for(var af in ai[ag]){ah=aj.call(this,ai[ag][af]);if(ah){return}}}};this.on("ok",function(af){T(function(ah){if(ah.validate){var ag=ah.validate(this),ai=typeof(ag)=="string"||ag===false;if(ai){af.data.hide=false;af.stop()}b.call(ah,!ai,typeof ag=="string"?ag:undefined);return ai}})},this,null,0);this.on("cancel",function(af){T(function(ag){if(ag.isChanged()){if(!confirm(J.lang.common.confirmCancel)){af.data.hide=false}return true}})},this,null,0);this.parts.close.on("click",function(af){if(this.fire("cancel",{hide:true}).hide!==false){this.hide()}af.data.preventDefault()},this);function P(){var ah=ac._.focusList;ah.sort(function(aj,ai){if(aj.tabIndex!=ai.tabIndex){return ai.tabIndex-aj.tabIndex}else{return aj.focusIndex-ai.focusIndex}});var ag=ah.length;for(var af=0;af<ag;af++){ah[af].focusIndex=af}}function Z(ag){var al=ac._.focusList,ak=ag?1:-1;if(al.length<1){return}var ai=ac._.currentFocusIndex;try{al[ai].getInputElement().$.blur()}catch(ah){}var aj=(ai+ak+al.length)%al.length,af=aj;while(!al[af].isFocusable()){af=(af+ak+al.length)%al.length;if(af==aj){break}}al[af].focus();if(al[af].type=="text"){al[af].select()}}this.changeFocus=Z;var G;function R(af){if(ac!=CKEDITOR.dialog._.currentTop){return}var aj=af.data.getKeystroke(),ai=J.lang.dir=="rtl";G=0;if(aj==9||aj==CKEDITOR.SHIFT+9){var ah=(aj==CKEDITOR.SHIFT+9);if(ac._.tabBarMode){var ag=ah?q.call(ac):A.call(ac);ac.selectPage(ag);ac._.tabs[ag][0].focus()}else{Z(!ah)}G=1}else{if(aj==CKEDITOR.ALT+121&&!ac._.tabBarMode&&ac.getPageCount()>1){ac._.tabBarMode=true;ac._.tabs[ac._.currentTabId][0].focus();G=1}else{if((aj==37||aj==39)&&ac._.tabBarMode){ag=(aj==(ai?39:37)?q.call(ac):A.call(ac));ac.selectPage(ag);ac._.tabs[ag][0].focus();G=1}else{if((aj==13||aj==32)&&ac._.tabBarMode){this.selectPage(this._.currentTabId);this._.tabBarMode=false;this._.currentFocusIndex=-1;Z(true);G=1}}}}if(G){af.stop();af.data.preventDefault()}}function M(af){G&&af.data.preventDefault()}var U=this._.element;this.on("show",function(){U.on("keydown",R,this,null,0);if(CKEDITOR.env.opera||(CKEDITOR.env.gecko&&CKEDITOR.env.mac)){U.on("keypress",M,this)}});this.on("hide",function(){U.removeListener("keydown",R);if(CKEDITOR.env.opera||(CKEDITOR.env.gecko&&CKEDITOR.env.mac)){U.removeListener("keypress",M)}T(function(af){x.apply(af)})});this.on("iframeAdded",function(af){var ag=new CKEDITOR.dom.document(af.data.iframe.$.contentWindow.document);ag.on("keydown",R,this,null,0)});this.on("show",function(){P();if(J.config.dialog_startupFocusTab&&ac._.pageCount>1){ac._.tabBarMode=true;ac._.tabs[ac._.currentTabId][0].focus()}else{if(!this._.hasFocus){this._.currentFocusIndex=-1;if(K.onFocus){var ag=K.onFocus.call(this);ag&&ag.focus()}else{Z(true)}if(this._.editor.mode=="wysiwyg"&&CKEDITOR.env.ie){var af=J.document.$.selection,ai=af.createRange();if(ai){if(ai.parentElement&&ai.parentElement().ownerDocument==J.document.$||ai.item&&ai.item(0).ownerDocument==J.document.$){var ah=document.body.createTextRange();ah.moveToElementText(this.getElement().getFirst().$);ah.collapse(true);ah.select()}}}}}},this,null,4294967295);if(CKEDITOR.env.ie6Compat){this.on("load",function(af){var ah=this.getElement(),ag=ah.getFirst();ag.remove();ag.appendTo(ah)},this)}v(this);E(this);(new CKEDITOR.dom.text(K.title,CKEDITOR.document)).appendTo(this.parts.title);for(var W=0;W<K.contents.length;W++){var L=K.contents[W];L&&this.addPage(L)}this.parts.tabs.on("click",function(af){var ag=af.data.getTarget();if(ag.hasClass("cke_dialog_tab")){var ah=ag.$.id;this.selectPage(ah.substring(4,ah.lastIndexOf("_")));if(this._.tabBarMode){this._.tabBarMode=false;this._.currentFocusIndex=-1;Z(true)}af.data.preventDefault()}},this);var O=[],Y=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:K.buttons},O).getChild();this.parts.footer.setHtml(O.join(""));for(W=0;W<Y.length;W++){this._.buttons[Y[W].id]=Y[W]}};function C(I,H,G){this.element=H;this.focusIndex=G;this.tabIndex=0;this.isFocusable=function(){return !H.getAttribute("disabled")&&H.isVisible()};this.focus=function(){I._.currentFocusIndex=this.focusIndex;this.element.focus()};H.on("keydown",function(J){if(J.data.getKeystroke() in {32:1,13:1}){this.fire("click")}});H.on("focus",function(){this.fire("mouseover")});H.on("blur",function(){this.fire("mouseout")})}CKEDITOR.dialog.prototype={destroy:function(){this.hide();this._.element.remove()},resize:(function(){return function(H,G){if(this._.contentSize&&this._.contentSize.width==H&&this._.contentSize.height==G){return}CKEDITOR.dialog.fire("resize",{dialog:this,skin:this._.editor.skinName,width:H,height:G},this._.editor);this.fire("resize",{skin:this._.editor.skinName,width:H,height:G},this._.editor);if(this._.editor.lang.dir=="rtl"&&this._.position){this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)}this._.contentSize={width:H,height:G}}})(),getSize:function(){var G=this._.element.getFirst();return{width:G.$.offsetWidth||0,height:G.$.offsetHeight||0}},move:(function(){var G;return function(O,L,K){var I=this._.element.getFirst(),M=this._.editor.lang.dir=="rtl";if(G===undefined){G=I.getComputedStyle("position")=="fixed"}if(G&&this._.position&&this._.position.x==O&&this._.position.y==L){return}this._.position={x:O,y:L};if(!G){var N=CKEDITOR.document.getWindow().getScrollPosition();O+=N.x;L+=N.y}if(M){var H=this.getSize(),J=CKEDITOR.document.getWindow().getViewPaneSize();O=J.width-H.width-O}var P={top:(L>0?L:0)+"px"};P[M?"right":"left"]=(O>0?O:0)+"px";I.setStyles(P);K&&(this._.moved=1)}})(),getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var I=this._.element;var H=this.definition;if(!(I.getParent()&&I.getParent().equals(CKEDITOR.document.getBody()))){I.appendTo(CKEDITOR.document.getBody())}else{I.setStyle("display","block")}if(CKEDITOR.env.gecko&&CKEDITOR.env.version<10900){var J=this.parts.dialog;J.setStyle("position","absolute");setTimeout(function(){J.setStyle("position","fixed")},0)}this.resize(this._.contentSize&&this._.contentSize.width||H.width||H.minWidth,this._.contentSize&&this._.contentSize.height||H.height||H.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);if(CKEDITOR.dialog._.currentZIndex===null){CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex}this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10);if(CKEDITOR.dialog._.currentTop===null){CKEDITOR.dialog._.currentTop=this;this._.parentDialog=null;i(this._.editor);I.on("keydown",n);I.on(CKEDITOR.env.opera?"keypress":"keyup",y);for(var K in {keyup:1,keydown:1,keypress:1}){I.on(K,D)}}else{this._.parentDialog=CKEDITOR.dialog._.currentTop;var G=this._.parentDialog.getElement().getFirst();G.$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2);CKEDITOR.dialog._.currentTop=this}l(this,this,"\x1b",null,function(){this.getButton("cancel")&&this.getButton("cancel").click()});this._.hasFocus=false;CKEDITOR.tools.setTimeout(function(){this.layout();this.parts.dialog.setStyle("visibility","");this.fireOnce("load",{});CKEDITOR.ui.fire("ready",this);this.fire("show",{});this._.editor.fire("dialogShow",this);this.foreach(function(L){L.setInitValue&&L.setInitValue()})},100,this)},layout:function(){var H=CKEDITOR.document.getWindow().getViewPaneSize(),G=this.getSize();this.move(this._.moved?this._.position.x:(H.width-G.width)/2,this._.moved?this._.position.y:(H.height-G.height)/2)},foreach:function(I){for(var H in this._.contents){for(var G in this._.contents[H]){I.call(this,this._.contents[H][G])}}return this},reset:(function(){var G=function(H){if(H.reset){H.reset(1)}};return function(){this.foreach(G);return this}})(),setupContent:function(){var G=arguments;this.foreach(function(H){if(H.setup){H.setup.apply(H,G)}})},commitContent:function(){var G=arguments;this.foreach(function(H){if(CKEDITOR.env.ie&&this._.currentFocusIndex==H.focusIndex){H.getInputElement().$.blur()}if(H.commit){H.commit.apply(H,G)}})},hide:function(){if(!this.parts.dialog.isVisible()){return}this.fire("hide",{});this._.editor.fire("dialogHide",this);var H=this._.element;H.setStyle("display","none");this.parts.dialog.setStyle("visibility","hidden");k(this);while(CKEDITOR.dialog._.currentTop!=this){CKEDITOR.dialog._.currentTop.hide()}if(!this._.parentDialog){o()}else{var G=this._.parentDialog.getElement().getFirst();G.setStyle("z-index",parseInt(G.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}CKEDITOR.dialog._.currentTop=this._.parentDialog;if(!this._.parentDialog){CKEDITOR.dialog._.currentZIndex=null;H.removeListener("keydown",n);H.removeListener(CKEDITOR.env.opera?"keypress":"keyup",y);for(var K in {keyup:1,keydown:1,keypress:1}){H.removeListener(K,D)}var J=this._.editor;J.focus();if(J.mode=="wysiwyg"&&CKEDITOR.env.ie){var I=J.getSelection();I&&I.unlock(true)}}else{CKEDITOR.dialog._.currentZIndex-=10}delete this._.parentDialog;this.foreach(function(L){L.resetInitValue&&L.resetInitValue()})},addPage:function(M){var J=[],N=M.label?' title="'+CKEDITOR.tools.htmlEncode(M.label)+'"':"",G=M.elements,Q=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:M.elements,expand:!!M.expand,padding:M.padding,style:M.style||"width: 100%;height:100%"},J);var P=CKEDITOR.dom.element.createFromHtml(J.join(""));P.setAttribute("role","tabpanel");var O=CKEDITOR.env;var I="cke_"+M.id+"_"+CKEDITOR.tools.getNextNumber(),K=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',(this._.pageCount>0?" cke_last":"cke_first"),N,(!!M.hidden?' style="display:none"':""),' id="',I,'"',O.gecko&&O.version>=10900&&!O.hc?"":' href="javascript:void(0)"',' tabIndex="-1"',' hidefocus="true"',' role="tab">',M.label,"</a>"].join(""));P.setAttribute("aria-labelledby",I);this._.tabs[M.id]=[K,P];this._.tabIdList.push(M.id);!M.hidden&&this._.pageCount++;this._.lastTab=K;this.updateStyle();var L=this._.contents[M.id]={},R,H=Q.getChild();while((R=H.shift())){L[R.id]=R;if(typeof(R.getChild)=="function"){H.push.apply(H,R.getChild())}}P.setAttribute("name",M.id);P.appendTo(this.parts.contents);K.unselectable();this.parts.tabs.append(K);if(M.accessKey){l(this,this,"CTRL+"+M.accessKey,F,g);this._.accessKeyMap["CTRL+"+M.accessKey]=M.id}},selectPage:function(K){if(this._.currentTabId==K){return}if(this.fire("selectPage",{page:K,currentPage:this._.currentTabId})===true){return}for(var G in this._.tabs){var I=this._.tabs[G][0],J=this._.tabs[G][1];if(G!=K){I.removeClass("cke_dialog_tab_selected");J.hide()}J.setAttribute("aria-hidden",G!=K)}var H=this._.tabs[K];H[0].addClass("cke_dialog_tab_selected");if(CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat){r(H[1]);H[1].show();setTimeout(function(){r(H[1],1)},0)}else{H[1].show()}this._.currentTabId=K;this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,K)},updateStyle:function(){this.parts.dialog[(this._.pageCount===1?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(H){var G=this._.tabs[H]&&this._.tabs[H][0];if(!G||this._.pageCount==1||!G.isVisible()){return}else{if(H==this._.currentTabId){this.selectPage(q.call(this))}}G.hide();this._.pageCount--;this.updateStyle()},showPage:function(H){var G=this._.tabs[H]&&this._.tabs[H][0];if(!G){return}G.show();this._.pageCount++;this.updateStyle()},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(H,G){var I=this._.contents[H];return I&&I[G]},getValueOf:function(H,G){return this.getContentElement(H,G).getValue()},setValueOf:function(H,G,I){return this.getContentElement(H,G).setValue(I)},getButton:function(G){return this._.buttons[G]},click:function(G){return this._.buttons[G].click()},disableButton:function(G){return this._.buttons[G].disable()},enableButton:function(G){return this._.buttons[G].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(I,G){if(typeof G=="undefined"){G=this._.focusList.length;this._.focusList.push(new C(this,I,G))}else{this._.focusList.splice(G,0,new C(this,I,G));for(var H=G+1;H<this._.focusList.length;H++){this._.focusList[H].focusIndex++}}}};CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(G,H){if(!this._.dialogDefinitions[G]||typeof H=="function"){this._.dialogDefinitions[G]=H}},exists:function(G){return !!this._.dialogDefinitions[G]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},okButton:(function(){var G=function(I,H){H=H||{};return CKEDITOR.tools.extend({id:"ok",type:"button",label:I.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(J){var K=J.data.dialog;if(K.fire("ok",{hide:true}).hide!==false){K.hide()}}},H,true)};G.type="button";G.override=function(H){return CKEDITOR.tools.extend(function(I){return G(I,H)},{type:"button"},true)};return G})(),cancelButton:(function(){var G=function(I,H){H=H||{};return CKEDITOR.tools.extend({id:"cancel",type:"button",label:I.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(J){var K=J.data.dialog;if(K.fire("cancel",{hide:true}).hide!==false){K.hide()}}},H,true)};G.type="button";G.override=function(H){return CKEDITOR.tools.extend(function(I){return G(I,H)},{type:"button"},true)};return G})(),addUIElement:function(H,G){this._.uiElementBuilders[H]=G}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype,true);var t={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]};var z=function(L,K,J){for(var H=0,I;(I=L[H]);H++){if(I.id==K){return I}if(J&&I[J]){var G=z(I[J],K,J);if(G){return G}}}return null};var d=function(N,I,M,K,L){if(M){for(var H=0,J;(J=N[H]);H++){if(J.id==M){N.splice(H,0,I);return I}if(K&&J[K]){var G=d(J[K],I,M,K,true);if(G){return G}}}if(L){return null}}N.push(I);return I};var j=function(L,K,J){for(var H=0,I;(I=L[H]);H++){if(I.id==K){return L.splice(H,1)}if(J&&I[J]){var G=j(I[J],K,J);if(G){return G}}}return null};var s=function(H,K){this.dialog=H;var J=K.contents;for(var G=0,I;(I=J[G]);G++){J[G]=I&&new c(H,I)}CKEDITOR.tools.extend(this,K)};s.prototype={getContents:function(G){return z(this.contents,G)},getButton:function(G){return z(this.buttons,G)},addContents:function(G,H){return d(this.contents,G,H)},addButton:function(G,H){return d(this.buttons,G,H)},removeContents:function(G){j(this.contents,G)},removeButton:function(G){j(this.buttons,G)}};function c(G,H){this._={dialog:G};CKEDITOR.tools.extend(this,H)}c.prototype={get:function(G){return z(this.elements,G,"children")},add:function(H,G){return d(this.elements,H,G,"children")},remove:function(G){j(this.elements,G,"children")}};function v(L){var I=null,N=null,H=L.getElement().getFirst(),J=L.getParentEditor(),G=J.config.dialog_magnetDistance,M=J.skin.margins||[0,0,0,0];if(typeof G=="undefined"){G=20}function K(V){var P=L.getSize(),S=CKEDITOR.document.getWindow().getViewPaneSize(),U=V.data.$.screenX,T=V.data.$.screenY,X=U-I.x,W=T-I.y,R,Q;I={x:U,y:T};N.x+=X;N.y+=W;if(N.x+M[3]<G){R=-M[3]}else{if(N.x-M[1]>S.width-P.width-G){R=S.width-P.width+(J.lang.dir=="rtl"?0:M[1])}else{R=N.x}}if(N.y+M[0]<G){Q=-M[0]}else{if(N.y-M[2]>S.height-P.height-G){Q=S.height-P.height+M[2]}else{Q=N.y}}L.move(R,Q,1);V.data.preventDefault()}function O(P){CKEDITOR.document.removeListener("mousemove",K);CKEDITOR.document.removeListener("mouseup",O);if(CKEDITOR.env.ie6Compat){var Q=u.getChild(0).getFrameDocument();Q.removeListener("mousemove",K);Q.removeListener("mouseup",O)}}L.parts.title.on("mousedown",function(P){I={x:P.data.$.screenX,y:P.data.$.screenY};CKEDITOR.document.on("mousemove",K);CKEDITOR.document.on("mouseup",O);N=L.getPosition();if(CKEDITOR.env.ie6Compat){var Q=u.getChild(0).getFrameDocument();Q.on("mousemove",K);Q.on("mouseup",O)}P.data.preventDefault()},L)}function E(M){var H=M.definition,G=H.resizable;if(G==CKEDITOR.DIALOG_RESIZE_NONE){return}var L=M.getParentEditor();var J,I,N,P,Q,S;var O=CKEDITOR.tools.addFunction(function(U){Q=M.getSize();var V=M.parts.contents,T=V.$.getElementsByTagName("iframe").length;if(T){S=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>');V.append(S)}I=Q.height-M.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.opera||CKEDITOR.env.ie&&CKEDITOR.env.quirks));J=Q.width-M.parts.contents.getSize("width",1);P={x:U.screenX,y:U.screenY};N=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on("mousemove",K);CKEDITOR.document.on("mouseup",R);if(CKEDITOR.env.ie6Compat){var W=u.getChild(0).getFrameDocument();W.on("mousemove",K);W.on("mouseup",R)}U.preventDefault&&U.preventDefault()});M.on("load",function(){var T="";if(G==CKEDITOR.DIALOG_RESIZE_WIDTH){T=" cke_resizer_horizontal"}else{if(G==CKEDITOR.DIALOG_RESIZE_HEIGHT){T=" cke_resizer_vertical"}}var U=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+T+" cke_resizer_"+L.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(L.lang.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+O+', event )"></div>');M.parts.footer.append(U,1)});L.on("destroy",function(){CKEDITOR.tools.removeFunction(O)});function K(aa){var Y=L.lang.dir=="rtl",ad=(aa.data.$.screenX-P.x)*(Y?-1:1),ac=aa.data.$.screenY-P.y,T=Q.width,ab=Q.height,U=T+ad*(M._.moved?1:2),W=ab+ac*(M._.moved?1:2),V=M._.element.getFirst(),Z=Y&&V.getComputedStyle("right"),X=M.getPosition();if(X.y+W>N.height){W=N.height-X.y}if((Y?Z:X.x)+U>N.width){U=N.width-(Y?Z:X.x)}if((G==CKEDITOR.DIALOG_RESIZE_WIDTH||G==CKEDITOR.DIALOG_RESIZE_BOTH)){T=Math.max(H.minWidth||0,U-J)}if(G==CKEDITOR.DIALOG_RESIZE_HEIGHT||G==CKEDITOR.DIALOG_RESIZE_BOTH){ab=Math.max(H.minHeight||0,W-I)}M.resize(T,ab);if(!M._.moved){M.layout()}aa.data.preventDefault()}function R(){CKEDITOR.document.removeListener("mouseup",R);CKEDITOR.document.removeListener("mousemove",K);if(S){S.remove();S=null}if(CKEDITOR.env.ie6Compat){var T=u.getChild(0).getFrameDocument();T.removeListener("mouseup",R);T.removeListener("mousemove",K)}}}var p;var m={},u;function B(G){G.data.preventDefault(1)}function i(O){var N=CKEDITOR.document.getWindow();var H=O.config,P=H.dialog_backgroundCoverColor||"white",J=H.dialog_backgroundCoverOpacity,Q=H.baseFloatZIndex,S=CKEDITOR.tools.genKey(P,J,Q),I=m[S];if(!I){var M=['<div tabIndex="-1" style="position: ',(CKEDITOR.env.ie6Compat?"absolute":"fixed"),"; z-index: ",Q,"; top: 0px; left: 0px; ",(!CKEDITOR.env.ie6Compat?"background-color: "+P:""),'" class="cke_dialog_background_cover">'];if(CKEDITOR.env.ie6Compat){var L=CKEDITOR.env.isCustomDomain(),R="<html><body style=\\'background-color:"+P+";\\'></body></html>";M.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:');M.push("void((function(){document.open();"+(L?"document.domain='"+document.domain+"';":"")+"document.write( '"+R+"' );document.close();})())");M.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')}M.push("</div>");I=CKEDITOR.dom.element.createFromHtml(M.join(""));I.setOpacity(J!=undefined?J:0.5);I.on("keydown",B);I.on("keypress",B);I.on("keyup",B);I.appendTo(CKEDITOR.document.getBody());m[S]=I}else{I.show()}u=I;var T=function(){var U=N.getViewPaneSize();I.setStyles({width:U.width+"px",height:U.height+"px"})};var K=function(){var W=N.getScrollPosition(),V=CKEDITOR.dialog._.currentTop;I.setStyles({left:W.x+"px",top:W.y+"px"});if(V){do{var U=V.getPosition();V.move(U.x,U.y)}while((V=V._.parentDialog))}};p=T;N.on("resize",T);T();if(!(CKEDITOR.env.mac&&CKEDITOR.env.webkit)){I.focus()}if(CKEDITOR.env.ie6Compat){var G=function(){K();arguments.callee.prevScrollHandler.apply(this,arguments)};N.$.setTimeout(function(){G.prevScrollHandler=window.onscroll||function(){};window.onscroll=G},0);K()}}function o(){if(!u){return}var G=CKEDITOR.document.getWindow();u.hide();G.removeListener("resize",p);if(CKEDITOR.env.ie6Compat){G.$.setTimeout(function(){var H=window.onscroll&&window.onscroll.prevScrollHandler;window.onscroll=H||null},0)}p=null}function e(){for(var G in m){m[G].remove()}m={}}var w={};var n=function(I){var K=I.data.$.ctrlKey||I.data.$.metaKey,L=I.data.$.altKey,H=I.data.$.shiftKey,J=String.fromCharCode(I.data.$.keyCode),G=w[(K?"CTRL+":"")+(L?"ALT+":"")+(H?"SHIFT+":"")+J];if(!G||!G.length){return}G=G[G.length-1];G.keydown&&G.keydown.call(G.uiElement,G.dialog,G.key);I.data.preventDefault()};var y=function(I){var K=I.data.$.ctrlKey||I.data.$.metaKey,L=I.data.$.altKey,H=I.data.$.shiftKey,J=String.fromCharCode(I.data.$.keyCode),G=w[(K?"CTRL+":"")+(L?"ALT+":"")+(H?"SHIFT+":"")+J];if(!G||!G.length){return}G=G[G.length-1];if(G.keyup){G.keyup.call(G.uiElement,G.dialog,G.key);I.data.preventDefault()}};var l=function(G,I,H,J,L){var K=w[H]||(w[H]=[]);K.push({uiElement:G,dialog:I,key:H,keyup:L||G.accessKeyUp,keydown:J||G.accessKeyDown})};var k=function(J){for(var H in w){var I=w[H];for(var G=I.length-1;G>=0;G--){if(I[G].dialog==J||I[G].uiElement==J){I.splice(G,1)}}if(I.length===0){delete w[H]}}};var g=function(H,G){if(H._.accessKeyMap[G]){H.selectPage(H._.accessKeyMap[G])}};var F=function(H,G){};var a={27:1,13:1};var D=function(G){if(G.data.getKeystroke() in a){G.data.stopPropagation()}};(function(){CKEDITOR.ui.dialog={uiElement:function(Y,S,T,J,V,H,I){if(arguments.length<4){return}var G=(J.call?J(S):J)||"div",Q=["<",G," "],P=(V&&V.call?V(S):V)||{},O=(H&&H.call?H(S):H)||{},M=(I&&I.call?I.call(this,Y,S):I)||"",L=this.domId=O.id||CKEDITOR.tools.getNextId()+"_uiElement",U=this.id=S.id,X;O.id=L;var Z={};if(S.type){Z["cke_dialog_ui_"+S.type]=1}if(S.className){Z[S.className]=1}if(S.disabled){Z.cke_disabled=1}var N=(O["class"]&&O["class"].split)?O["class"].split(" "):[];for(X=0;X<N.length;X++){if(N[X]){Z[N[X]]=1}}var K=[];for(X in Z){K.push(X)}O["class"]=K.join(" ");if(S.title){O.title=S.title}var R=(S.style||"").split(";");if(S.align){var W=S.align;P["margin-left"]=W=="left"?0:"auto";P["margin-right"]=W=="right"?0:"auto"}for(X in P){R.push(X+":"+P[X])}if(S.hidden){R.push("display:none")}for(X=R.length-1;X>=0;X--){if(R[X]===""){R.splice(X,1)}}if(R.length>0){O.style=(O.style?(O.style+"; "):"")+R.join("; ")}for(X in O){Q.push(X+'="'+CKEDITOR.tools.htmlEncode(O[X])+'" ')}Q.push(">",M,"</",G,">");T.push(Q.join(""));(this._||(this._={})).dialog=Y;if(typeof(S.isChanged)=="boolean"){this.isChanged=function(){return S.isChanged}}if(typeof(S.isChanged)=="function"){this.isChanged=S.isChanged}if(typeof(S.setValue)=="function"){this.setValue=CKEDITOR.tools.override(this.setValue,function(ab){return function(ac){ab.call(this,S.setValue.call(this,ac))}})}if(typeof(S.getValue)=="function"){this.getValue=CKEDITOR.tools.override(this.getValue,function(ab){return function(){return S.getValue.call(this,ab.call(this))}})}CKEDITOR.event.implementOn(this);this.registerEvents(S);if(this.accessKeyUp&&this.accessKeyDown&&S.accessKey){l(this,Y,"CTRL+"+S.accessKey)}var aa=this;Y.on("load",function(){var ab=aa.getInputElement();if(ab){var ac=aa.type in {checkbox:1,ratio:1}&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?"cke_dialog_ui_focused":"";ab.on("focus",function(){Y._.tabBarMode=false;Y._.hasFocus=true;aa.fire("focus");ac&&this.addClass(ac)});ab.on("blur",function(){aa.fire("blur");ac&&this.removeClass(ac)})}});if(this.keyboardFocusable){this.tabIndex=S.tabIndex||0;this.focusIndex=Y._.focusList.push(this)-1;this.on("focus",function(){Y._.currentFocusIndex=aa.focusIndex})}CKEDITOR.tools.extend(this,S)},hbox:function(M,Q,R,I,H){if(arguments.length<4){return}this._||(this._={});var J=this._.children=Q,K=H&&H.widths||null,O=H&&H.height||null,P={},L;var N=function(){var S=['<tbody><tr class="cke_dialog_ui_hbox">'];for(L=0;L<R.length;L++){var T="cke_dialog_ui_hbox_child",U=[];if(L===0){T="cke_dialog_ui_hbox_first"}if(L==R.length-1){T="cke_dialog_ui_hbox_last"}S.push('<td class="',T,'" role="presentation" ');if(K){if(K[L]){U.push("width:"+h(K[L]))}}else{U.push("width:"+Math.floor(100/R.length)+"%")}if(O){U.push("height:"+h(O))}if(H&&H.padding!=undefined){U.push("padding:"+h(H.padding))}if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&J[L].align){U.push("text-align:"+J[L].align)}if(U.length>0){S.push('style="'+U.join("; ")+'" ')}S.push(">",R[L],"</td>")}S.push("</tr></tbody>");return S.join("")};var G={role:"presentation"};H&&H.align&&(G.align=H.align);CKEDITOR.ui.dialog.uiElement.call(this,M,H||{type:"hbox"},I,"table",P,G,N)},vbox:function(K,N,O,I,G){if(arguments.length<3){return}this._||(this._={});var J=this._.children=N,H=G&&G.width||null,L=G&&G.heights||null;var M=function(){var Q=['<table role="presentation" cellspacing="0" border="0" '];Q.push('style="');if(G&&G.expand){Q.push("height:100%;")}Q.push("width:"+h(H||"100%"),";");Q.push('"');Q.push('align="',CKEDITOR.tools.htmlEncode((G&&G.align)||(K.getParentEditor().lang.dir=="ltr"?"left":"right")),'" ');Q.push("><tbody>");for(var P=0;P<O.length;P++){var R=[];Q.push('<tr><td role="presentation" ');if(H){R.push("width:"+h(H||"100%"))}if(L){R.push("height:"+h(L[P]))}else{if(G&&G.expand){R.push("height:"+Math.floor(100/O.length)+"%")}}if(G&&G.padding!=undefined){R.push("padding:"+h(G.padding))}if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&J[P].align){R.push("text-align:"+J[P].align)}if(R.length>0){Q.push('style="',R.join("; "),'" ')}Q.push(' class="cke_dialog_ui_vbox_child">',O[P],"</td></tr>")}Q.push("</tbody></table>");return Q.join("")};CKEDITOR.ui.dialog.uiElement.call(this,K,G||{type:"vbox"},I,"div",null,{role:"presentation"},M)}}})();CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(H,G){this.getInputElement().setValue(H);!G&&this.fire("change",{value:H});return this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return false},selectParentTab:function(){var H=this.getInputElement(),I=H,G;while((I=I.getParent())&&I.$.className.search("cke_dialog_page_contents")==-1){}if(!I){return this}G=I.getAttribute("name");if(this._.dialog._.currentTabId!=G){this._.dialog.selectPage(G)}return this},focus:function(){this.selectParentTab().getInputElement().focus();return this},registerEvents:function(I){var J=/^on([A-Z]\w+)/,G;var K=function(M,N,L,O){N.on("load",function(){M.getInputElement().on(L,O,M)})};for(var H in I){if(!(G=H.match(J))){continue}if(this.eventProcessors[H]){this.eventProcessors[H].call(this,this._.dialog,I[H])}else{K(this,this._.dialog,G[1].toLowerCase(),I[H])}}return this},eventProcessors:{onLoad:function(G,H){G.on("load",H,this)},onShow:function(G,H){G.on("show",H,this)},onHide:function(G,H){G.on("hide",H,this)}},accessKeyDown:function(H,G){this.focus()},accessKeyUp:function(H,G){},disable:function(){var H=this.getElement(),G=this.getInputElement();G.setAttribute("disabled","true");H.addClass("cke_disabled")},enable:function(){var H=this.getElement(),G=this.getInputElement();G.removeAttribute("disabled");H.removeClass("cke_disabled")},isEnabled:function(){return !this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){if(!this.isEnabled()||!this.isVisible()){return false}return true}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(G){if(arguments.length<1){return this._.children.concat()}if(!G.splice){G=[G]}if(G.length<2){return this._.children[G[0]]}else{return(this._.children[G[0]]&&this._.children[G[0]].getChild)?this._.children[G[0]].getChild(G.slice(1,G.length)):null}}},true);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox();(function(){var G={build:function(N,H,K){var J=H.children,I,P=[],O=[];for(var M=0;(M<J.length&&(I=J[M]));M++){var L=[];P.push(L);O.push(CKEDITOR.dialog._.uiElementBuilders[I.type].build(N,I,L))}return new CKEDITOR.ui.dialog[H.type](N,O,P,K,H)}};CKEDITOR.dialog.addUIElement("hbox",G);CKEDITOR.dialog.addUIElement("vbox",G)})();CKEDITOR.dialogCommand=function(G){this.dialogName=G};CKEDITOR.dialogCommand.prototype={exec:function(G){CKEDITOR.env.opera?CKEDITOR.tools.setTimeout(function(){G.openDialog(this.dialogName)},0,this):G.openDialog(this.dialogName)},canUndo:false,editorFocus:CKEDITOR.env.ie||CKEDITOR.env.webkit};(function(){var H=/^([a]|[^a])+$/,G=/^\d*$/,I=/^\d*(?:\.\d+)?$/,J=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,L=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,K=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function(){var M=arguments;return function(){var P=this&&this.getValue?this.getValue():M[0];var R=undefined,O=CKEDITOR.VALIDATE_AND,Q=[],N;for(N=0;N<M.length;N++){if(typeof(M[N])=="function"){Q.push(M[N])}else{break}}if(N<M.length&&typeof(M[N])=="string"){R=M[N];N++}if(N<M.length&&typeof(M[N])=="number"){O=M[N]}var S=(O==CKEDITOR.VALIDATE_AND?true:false);for(N=0;N<Q.length;N++){if(O==CKEDITOR.VALIDATE_AND){S=S&&Q[N](P)}else{S=S||Q[N](P)}}return !S?R:true}},regex:function(M,N){return function(){var O=this&&this.getValue?this.getValue():arguments[0];return !M.test(O)?N:true}},notEmpty:function(M){return this.regex(H,M)},integer:function(M){return this.regex(G,M)},number:function(M){return this.regex(I,M)},cssLength:function(M){return this.functions(function(N){return L.test(CKEDITOR.tools.trim(N))},M)},htmlLength:function(M){return this.functions(function(N){return J.test(CKEDITOR.tools.trim(N))},M)},inlineStyle:function(M){return this.functions(function(N){return K.test(CKEDITOR.tools.trim(N))},M)},equals:function(M,N){return this.functions(function(O){return O==M},N)},notEqual:function(M,N){return this.functions(function(O){return O!=M},N)}};CKEDITOR.on("instanceDestroyed",function(N){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){var M;while((M=CKEDITOR.dialog._.currentTop)){M.hide()}e()}var P=N.editor._.storedDialogs;for(var O in P){P[O].destroy()}})})();CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(I,P){if(this.mode=="wysiwyg"&&CKEDITOR.env.ie){var M=this.getSelection();M&&M.lock()}var H=CKEDITOR.dialog._.dialogDefinitions[I],G=this.skin.dialog;if(CKEDITOR.dialog._.currentTop===null){i(this)}if(typeof H=="function"&&G._isLoaded){var N=this._.storedDialogs||(this._.storedDialogs={});var K=N[I]||(N[I]=new CKEDITOR.dialog(this,I));P&&P.call(K,K);K.show();return K}else{if(H=="failed"){o();throw new Error('[CKEDITOR.dialog.openDialog] Dialog "'+I+'" failed when loading definition.')}}var L=this;function J(R){var S=CKEDITOR.dialog._.dialogDefinitions[I],Q=L.skin.dialog;if(!Q._isLoaded||O&&typeof R=="undefined"){return}if(typeof S!="function"){CKEDITOR.dialog._.dialogDefinitions[I]="failed"}L.openDialog(I,P)}if(typeof H=="string"){var O=1;CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(H),J,null,0,1)}CKEDITOR.skins.load(this,"dialog",J);return null}})})();CKEDITOR.plugins.add("dialog",{requires:["dialogui"]});