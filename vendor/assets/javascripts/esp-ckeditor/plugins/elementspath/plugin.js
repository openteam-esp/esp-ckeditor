(function(){var a={toolbarFocus:{editorFocus:false,readOnly:1,exec:function(d){var e=d._.elementsPath.idBase;var c=CKEDITOR.document.getById(e+"0");c&&c.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}};var b='<span class="cke_empty">&nbsp;</span>';CKEDITOR.plugins.add("elementspath",{requires:["selection"],init:function(e){var i="cke_path_"+e.name;var j;var f=function(){if(!j){j=CKEDITOR.document.getById(i)}return j};var k="cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_";e._.elementsPath={idBase:k,filters:[]};e.on("themeSpace",function(l){if(l.data.space=="bottom"){l.data.html+='<span id="'+i+'_label" class="cke_voice_label">'+e.lang.elementsPath.eleLabel+'</span><div id="'+i+'" class="cke_path" role="group" aria-labelledby="'+i+'_label">'+b+"</div>"}});function g(n){e.focus();var m=e._.elementsPath.list[n];if(m.is("body")){var l=new CKEDITOR.dom.range(e.document);l.selectNodeContents(m);l.select()}else{e.getSelection().selectElement(m)}}var c=CKEDITOR.tools.addFunction(g);var h=CKEDITOR.tools.addFunction(function(m,o){var n=e._.elementsPath.idBase,l;o=new CKEDITOR.dom.event(o);var p=e.lang.dir=="rtl";switch(o.getKeystroke()){case p?39:37:case 9:l=CKEDITOR.document.getById(n+(m+1));if(!l){l=CKEDITOR.document.getById(n+"0")}l.focus();return false;case p?37:39:case CKEDITOR.SHIFT+9:l=CKEDITOR.document.getById(n+(m-1));if(!l){l=CKEDITOR.document.getById(n+(e._.elementsPath.list.length-1))}l.focus();return false;case 27:e.focus();return false;case 13:case 32:g(m);return false}return true});e.on("selectionChange",function(x){var t=CKEDITOR.env,A=x.data.selection,q=A.getStartElement(),r=[],u=x.editor,z=u._.elementsPath.list=[],n=u._.elementsPath.filters;while(q){var w=0,m;if(q.data("cke-display-name")){m=q.data("cke-display-name")}else{if(q.data("cke-real-element-type")){m=q.data("cke-real-element-type")}else{m=q.getName()}}for(var p=0;p<n.length;p++){var v=n[p](q,m);if(v===false){w=1;break}m=v||m}if(!w){var s=z.push(q)-1;var o="";if(t.opera||(t.gecko&&t.mac)){o+=' onkeypress="return false;"'}if(t.gecko){o+=' onblur="this.style.cssText = this.style.cssText;"'}var y=u.lang.elementsPath.eleTitle.replace(/%1/,m);r.unshift('<a id="',k,s,'" href="javascript:void(\'',m,'\')" tabindex="-1" title="',y,'"'+((CKEDITOR.env.gecko&&CKEDITOR.env.version<10900)?' onfocus="event.preventBubble();"':"")+' hidefocus="true"  onkeydown="return CKEDITOR.tools.callFunction(',h,",",s,', event );"'+o,' onclick="CKEDITOR.tools.callFunction('+c,",",s,'); return false;"',' role="button" aria-labelledby="'+k+s+'_label">',m,'<span id="',k,s,'_label" class="cke_label">'+y+"</span>","</a>")}if(m=="body"){break}q=q.getParent()}var l=f();l.setHtml(r.join("")+b);u.fire("elementsPathUpdate",{space:l})});function d(){j&&j.setHtml(b);delete e._.elementsPath.list}e.on("readOnly",d);e.on("contentDomUnload",d);e.addCommand("elementsPathFocus",a.toolbarFocus)}})})();