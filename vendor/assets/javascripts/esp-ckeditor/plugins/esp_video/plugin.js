CKEDITOR.plugins.add("esp_video",{lang:["en","ru","uk"],init:function(a){var b=a.lang.esp_video;if(typeof a.element.data=="undefined"){alert('The "video" plugin requires CKEditor 3.5 or newer');return}CKEDITOR.dialog.add("esp_video",this.path+"dialogs/esp_video.js");a.addCommand("esp_video",new CKEDITOR.dialogCommand("esp_video"));a.ui.addButton("Esp_video",{label:b.toolbar,command:"esp_video",icon:this.path+"images/esp_video.png"});a.addCss("img.cke_video{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;background-color:gray;border: 1px solid #a9a9a9;width: 80px;height: 80px;}");if(a.addMenuItems){a.addMenuItems({video:{label:b.properties,command:"video",group:"flash"}})}a.on("doubleclick",function(c){var d=c.data.element;if(d.is("img")&&d.data("cke-real-element-type")=="video"){c.data.dialog="video"}});if(a.contextMenu){a.contextMenu.addListener(function(c,d){if(c&&c.is("img")&&!c.isReadOnly()&&c.data("cke-real-element-type")=="video"){return{video:CKEDITOR.TRISTATE_OFF}}})}CKEDITOR.dtd.$empty["cke:source"]=1;CKEDITOR.dtd.$empty.source=1;a.lang.fakeobjects.video=b.fakeObject},afterInit:function(b){var a=b.dataProcessor,d=a&&a.htmlFilter,c=a&&a.dataFilter;c.addRules({elements:{$:function(g){if(g.name=="video"){g.name="cke:video";var f=b.createFakeParserElement(g,"cke_video","video",false),i=f.attributes.style||"";var h=g.attributes.width,e=g.attributes.height,j=g.attributes.poster;if(typeof h!="undefined"){i=f.attributes.style=i+"width:"+CKEDITOR.tools.cssLength(h)+";"}if(typeof e!="undefined"){i=f.attributes.style=i+"height:"+CKEDITOR.tools.cssLength(e)+";"}if(j){i=f.attributes.style=i+"background-image:url("+j+");"}return f}}}})}});