CKEDITOR.plugins.add("popup");CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(c,f,a,b){f=f||"80%";a=a||"70%";if(typeof f=="string"&&f.length>1&&f.substr(f.length-1,1)=="%"){f=parseInt(window.screen.width*parseInt(f,10)/100,10)}if(typeof a=="string"&&a.length>1&&a.substr(a.length-1,1)=="%"){a=parseInt(window.screen.height*parseInt(a,10)/100,10)}if(f<640){f=640}if(a<420){a=420}var i=parseInt((window.screen.height-a)/2,10),h=parseInt((window.screen.width-f)/2,10);b=(b||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+f+",height="+a+",top="+i+",left="+h;var d=window.open("",null,b,true);if(!d){return false}try{d.moveTo(h,i);d.resizeTo(f,a);d.focus();d.location.href=c}catch(g){d=window.open(c,null,b,true)}return true}});